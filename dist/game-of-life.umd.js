!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports):"function"==typeof define&&define.amd?define(["exports"],o):o((t=t||self).GameOfLife={})}(this,function(t){"use strict";var o=(i.prototype.liveOut=function(){for(var t=JSON.parse(JSON.stringify(this.matrix)),o=0;o<this.options.cols;o++)for(var i=0;i<this.options.rows;i++){var s=this.calcNeighbours(o,i);this.matrix[o][i]||3!==s||(t[o][i]=1),this.matrix[o][i]&&(s<2||3<s)&&(t[o][i]=0)}return this.matrix=t,this.canvas.draw(t),t},i.prototype.randomize=function(){for(var t=0;t<this.options.cols;t++)for(var o=0;o<this.options.rows;o++)this.matrix[t]||(this.matrix[t]=Array(this.options.cols)),this.matrix[t][o]=.5<=Math.random()?1:0},i.prototype.calcNeighbours=function(t,o){function i(t,o){return t<0&&(t=s.options.cols-1),t>=s.options.cols&&(t=0),o<0&&(o=s.options.rows-1),o>=s.options.rows&&(o=0),s.matrix[t][o]}var s=this;return[i(t-1,o-1),i(t,o-1),i(t+1,o-1),i(t-1,o),i(t+1,o),i(t-1,o+1),i(t,o+1),i(t+1,o+1)].reduce(function(t,o){return t+o},0)},i);function i(t,o){this.options=o,this.canvas=new s(t,{rows:this.options.rows,cols:this.options.cols,color:this.options.color}),this.options.seed?this.matrix=this.options.seed:(this.matrix=[],this.randomize()),this.canvas.draw(this.matrix)}var s=(r.prototype.draw=function(t){if(!this.ctx)throw new Error("Can't get 2d context of canvas");var o=parseInt(this.canvas.getAttribute("width")||"100",10),i=parseInt(this.canvas.getAttribute("height")||"100",10);this.ctx.clearRect(0,0,o,i);var s=o/this.options.cols,r=i/this.options.rows;this.ctx.strokeStyle=this.ctx.fillStyle=this.options.color?this.options.color:"#d0b3d1";for(var n=0;n<this.options.cols;n++)for(var e=0;e<this.options.rows;e++)t[n][e]&&this.ctx.fillRect(n*s,e*r,s,r)},r);function r(t,o){this.canvas=document.getElementById(t),this.options=o,this.ctx=this.canvas.getContext("2d")}t.Game=o,Object.defineProperty(t,"__esModule",{value:!0})});
